<!-- Header -->
<header class="navbar-custom">
  <div class="container d-flex justify-content-between align-items-center py-2">
    <a routerLink="/" class="navbar-brand">Artist Search</a>

    <div class="nav-buttons d-flex align-items-center">
      <!-- Show these buttons if the user is NOT logged in -->
      <ng-container *ngIf="!isLoggedIn; else loggedInLinks">
        <button type="button"
                [routerLink]="'/'"
                class="btn btn-outline-primary"
                [class.active]="currentRoute === '/'">
          Search
        </button>
        <button type="button"
                [routerLink]="'/login'"
                class="btn btn-outline-primary"
                [class.active]="currentRoute === '/login'">
          Login
        </button>
        <button type="button"
                [routerLink]="'/signup'"
                class="btn btn-outline-primary"
                [class.active]="currentRoute === '/signup'">
          Register
        </button>
      </ng-container>

      <!-- When logged in -->
      <ng-template #loggedInLinks>
        <button type="button"
                [routerLink]="'/'"
                class="btn btn-outline-primary me-2"
                [class.active]="currentRoute === '/'">
          Search
        </button>
        <button type="button"
                [routerLink]="'/favorites'"
                class="btn btn-outline-primary me-3"
                [class.active]="currentRoute === '/favorites'">
          Favorites
        </button>

        <div class="dropdown">
          <button class="btn btn-outline-light dropdown-toggle d-flex align-items-center" id="userDropdown" data-bs-toggle="dropdown" aria-expanded="false">
            <img [src]="userGravatarUrl" alt="User Avatar" class="rounded-circle me-2" width="32" height="32">
            <span class="text-dark">{{ userName }}</span>
          </button>
          <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="userDropdown">
            <li><button class="dropdown-item text-danger" (click)="deleteAccount()">Delete account</button></li>
            <li><button class="dropdown-item" (click)="logout()">Log out</button></li>
          </ul>
        </div>
      </ng-template>
    </div>
  </div>
</header>

<!-- Main Content -->
<main class="flex-grow-1 mt-4">
  <div class="container">
    <router-outlet></router-outlet>
  </div>
</main>

<!-- Footer -->
<footer class="footer-custom mt-5">
  <div class="container text-center">
    <span>Powered by</span>
    <img src="assets/artsy_logo.svg" alt="Artsy Logo" class="footer-logo" />
    <a href="https://www.artsy.net" class="footer-link">Artsy</a>
  </div>
</footer>

<!-- Global Toast Notifications -->
<div class="toast-container position-fixed top-70px end-0 p-3">
  <div *ngFor="let toast of toasts"
       class="toast align-items-center text-white border-0 mb-2"
       role="alert"
       aria-live="assertive"
       aria-atomic="true"
       [ngClass]="{
         'bg-success': toast.color === 'success',
         'bg-danger': toast.color === 'danger',
         'show': toast.show
       }">
    <div class="d-flex">
      <div class="toast-body">{{ toast.message }}</div>
      <button type="button" class="btn-close btn-close-white me-2 m-auto" (click)="toast.show = false"></button>
    </div>
  </div>
</div>